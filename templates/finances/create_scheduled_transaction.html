{% extends 'base.html' %}

{% block title %}Create Scheduled Transaction{% endblock %}

{% block content %}
<div class="container">
    <h2>Create Scheduled Transaction</h2>
    
    <form method="POST">
        {% csrf_token %}
        <div class="form-group">
            <label for="id_name">Name</label>
            {{ form.name }}
        </div>

        <div class="form-group">
            <label for="id_category">Category</label>
            {{ form.category }}
        </div>

        <div class="form-group">
            <label for="id_account">Account</label>
            {{ form.account }}
        </div>

        <div class="form-group">
            <label for="id_amount">Amount</label>
            {{ form.amount }}
        </div>

        <div class="form-group">
            <label for="id_transaction_type">Transaction Type</label>
            {{ form.transaction_type }}
        </div>

        <div class="form-group">
            <label for="id_date_scheduled">Date Scheduled</label>
            {{ form.date_scheduled }}
        </div>

        <div class="form-group">
            <label for="id_repeat_type">Repeat Type</label>
            {{ form.repeat_type }}
            <small id="repeatNote" class="form-text text-muted">
                Select repeat type (One-time, Daily, Weekly, Monthly, Yearly). For One-time, set repeats to 1.
            </small>
        </div>

        <div class="form-group">
            <label for="id_repeats">Number of Transactions</label>
            {{ form.repeats }}
            <small id="repeatsNote" class="form-text text-muted">
                Setting this to 0 makes the scheduled transaction infinitely recurring.
            </small>
        </div>

        <div class="form-group">
            <label for="id_note">Note</label>
            {{ form.note }}
        </div>

        <button type="submit" class="btn btn-primary">Create</button>
    </form>
</div>

<script>
    document.getElementById('id_repeat_type').addEventListener('change', function () {
        const repeatsField = document.getElementById('id_repeats');
        const repeatType = this.value;

        if (repeatType === 'once') {
            repeatsField.disabled = true;
            repeatsField.value = 1;
        } else {
            repeatsField.disabled = false;
        }
    });
</script>
{% endblock %}
